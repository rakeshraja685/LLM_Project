<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainable Smart City Assistant</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header__brand">
            <h1>Smart City Assistant</h1>
        </div>
        <nav class="header__nav">
            <button class="nav-btn" data-module="dashboard">Dashboard</button>
            <button class="nav-btn" data-module="feedback">Feedback</button>
            <button class="nav-btn" data-module="documents">Documents</button>
            <button class="nav-btn" data-module="eco-advice">Eco-Advice</button>
            <button class="nav-btn" data-module="anomalies">Anomalies</button>
            <button class="nav-btn" data-module="forecasting">Forecasting</button>
            <button class="nav-btn" data-module="chat">Chat</button>
        </nav>
        <div class="header__controls">
            <button id="theme-toggle" class="btn btn--outline btn--sm">ðŸŒ™</button>
        </div>
    </header>

    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar__section">
                <h3>System Status</h3>
                <div class="status-indicators">
                    <div class="status-item">
                        <span class="status status--success">Online</span>
                        <span>All Systems</span>
                    </div>
                    <div class="status-item">
                        <span class="status status--warning">2</span>
                        <span>Active Alerts</span>
                    </div>
                </div>
            </div>
            <div class="sidebar__section">
                <h3>Quick Actions</h3>
                <button class="btn btn--secondary btn--full-width" data-module="feedback">Submit Feedback</button>
                <button class="btn btn--secondary btn--full-width" data-module="chat">Ask Assistant</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Module -->
            <div id="dashboard" class="module active">
                <div class="module__header">
                    <h2>City Health Dashboard</h2>
                    <div class="module__actions">
                        <span class="last-updated">Last updated: <span id="last-update-time"></span></span>
                    </div>
                </div>
                
                <div class="kpi-grid">
                    <div class="kpi-card" data-kpi="traffic">
                        <div class="kpi-card__header">
                            <h3>Traffic Performance</h3>
                            <span class="status status--success">Normal</span>
                        </div>
                        <div class="kpi-card__value">72%</div>
                        <div class="kpi-card__trend trend-down">â†“ 5%</div>
                    </div>
                    
                    <div class="kpi-card" data-kpi="energy">
                        <div class="kpi-card__header">
                            <h3>Energy Consumption</h3>
                            <span class="status status--warning">High</span>
                        </div>
                        <div class="kpi-card__value">85%</div>
                        <div class="kpi-card__trend trend-up">â†‘ 3%</div>
                    </div>
                    
                    <div class="kpi-card" data-kpi="airQuality">
                        <div class="kpi-card__header">
                            <h3>Air Quality</h3>
                            <span class="status status--success">Good</span>
                        </div>
                        <div class="kpi-card__value">45 AQI</div>
                        <div class="kpi-card__trend trend-down">â†“ 12</div>
                    </div>
                    
                    <div class="kpi-card" data-kpi="waterUsage">
                        <div class="kpi-card__header">
                            <h3>Water Usage</h3>
                            <span class="status status--warning">Warning</span>
                        </div>
                        <div class="kpi-card__value">78%</div>
                        <div class="kpi-card__trend trend-up">â†‘ 8%</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card__body">
                            <h3>Recent Alerts</h3>
                            <div id="recent-alerts" class="alerts-list"></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card__body">
                            <h3>Performance Trends</h3>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="dashboard-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Citizen Feedback Module -->
            <div id="feedback" class="module">
                <div class="module__header">
                    <h2>Citizen Feedback System</h2>
                    <div class="module__actions">
                        <button id="toggle-feedback-view" class="btn btn--outline">Admin View</button>
                    </div>
                </div>

                <div id="feedback-form-view">
                    <div class="card">
                        <div class="card__body">
                            <h3>Submit Feedback</h3>
                            <form id="feedback-form">
                                <div class="form-group">
                                    <label class="form-label">Category</label>
                                    <select class="form-control" id="feedback-category" required>
                                        <option value="">Select category...</option>
                                        <option value="Water">Water</option>
                                        <option value="Traffic">Traffic</option>
                                        <option value="Safety">Safety</option>
                                        <option value="Environment">Environment</option>
                                        <option value="Infrastructure">Infrastructure</option>
                                        <option value="Public Services">Public Services</option>
                                        <option value="Health">Health</option>
                                        <option value="Education">Education</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Title</label>
                                    <input type="text" class="form-control" id="feedback-title" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-control" id="feedback-description" rows="4" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Priority</label>
                                    <select class="form-control" id="feedback-priority" required>
                                        <option value="Low">Low</option>
                                        <option value="Medium">Medium</option>
                                        <option value="High">High</option>
                                        <option value="Critical">Critical</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Attach File (Optional)</label>
                                    <input type="file" class="form-control" id="feedback-file" accept="image/*,.pdf">
                                </div>
                                <button type="submit" class="btn btn--primary">Submit Feedback</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="feedback-admin-view" class="hidden">
                    <div class="card">
                        <div class="card__body">
                            <h3>All Feedback</h3>
                            <div class="feedback-filters">
                                <select id="feedback-filter" class="form-control">
                                    <option value="">All Categories</option>
                                    <option value="Water">Water</option>
                                    <option value="Traffic">Traffic</option>
                                    <option value="Safety">Safety</option>
                                    <option value="Environment">Environment</option>
                                </select>
                            </div>
                            <div id="feedback-list" class="feedback-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Document Summarization Module -->
            <div id="documents" class="module">
                <div class="module__header">
                    <h2>Document Summarization Tool</h2>
                </div>
                
                <div class="card">
                    <div class="card__body">
                        <h3>Upload Document</h3>
                        <div class="upload-area" id="document-upload">
                            <div class="upload-placeholder">
                                <p>Drag and drop a PDF file here or click to browse</p>
                                <input type="file" id="document-file" accept=".pdf" class="hidden">
                                <button class="btn btn--primary" onclick="document.getElementById('document-file').click()">Browse Files</button>
                            </div>
                        </div>
                        
                        <div id="document-summary" class="hidden">
                            <h4>Document Summary</h4>
                            <div class="summary-content">
                                <div class="summary-format-toggle">
                                    <button class="btn btn--outline btn--sm active" data-format="bullets">Bullet Points</button>
                                    <button class="btn btn--outline btn--sm" data-format="paragraph">Paragraph</button>
                                </div>
                                <div id="summary-text"></div>
                                <div class="summary-actions">
                                    <button class="btn btn--secondary" id="export-summary">Export Summary</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Eco-Advice Module -->
            <div id="eco-advice" class="module">
                <div class="module__header">
                    <h2>Eco-Advice System</h2>
                </div>
                
                <div class="eco-grid">
                    <div class="card">
                        <div class="card__body">
                            <h3>Sustainability Tips</h3>
                            <div id="eco-tips" class="tips-list"></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card__body">
                            <h3>Carbon Footprint Calculator</h3>
                            <form id="carbon-calculator">
                                <div class="form-group">
                                    <label class="form-label">Monthly Energy Usage (kWh)</label>
                                    <input type="number" class="form-control" id="energy-usage" value="500">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Monthly Transport (km)</label>
                                    <input type="number" class="form-control" id="transport-usage" value="200">
                                </div>
                                <button type="submit" class="btn btn--primary">Calculate</button>
                            </form>
                            <div id="carbon-result" class="hidden">
                                <h4>Your Carbon Footprint</h4>
                                <div class="carbon-value"></div>
                                <div class="carbon-recommendations"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Anomaly Detection Module -->
            <div id="anomalies" class="module">
                <div class="module__header">
                    <h2>Anomaly Detection Dashboard</h2>
                    <div class="module__actions">
                        <span class="status status--success">System Active</span>
                    </div>
                </div>
                
                <div class="anomaly-stats">
                    <div class="stat-card">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Active Anomalies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Resolved Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">98.5%</div>
                        <div class="stat-label">System Uptime</div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card__body">
                        <h3>Live Anomalies</h3>
                        <div id="anomaly-list" class="anomaly-list"></div>
                    </div>
                </div>
            </div>

            <!-- KPI Forecasting Module -->
            <div id="forecasting" class="module">
                <div class="module__header">
                    <h2>KPI Forecasting</h2>
                </div>
                
                <div class="forecast-controls">
                    <div class="form-group">
                        <label class="form-label">Select Metric</label>
                        <select id="forecast-metric" class="form-control">
                            <option value="waterUsage">Water Usage</option>
                            <option value="energyConsumption">Energy Consumption</option>
                            <option value="trafficFlow">Traffic Flow</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Upload CSV Data (Optional)</label>
                        <input type="file" class="form-control" id="forecast-csv" accept=".csv">
                    </div>
                </div>
                
                <div class="card">
                    <div class="card__body">
                        <h3>Forecast Chart</h3>
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <canvas id="forecast-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Assistant Module -->
            <div id="chat" class="module">
                <div class="module__header">
                    <h2>Chat Assistant</h2>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="chat-message assistant">
                            <div class="message-content">
                                Hello! I'm your Smart City Assistant. How can I help you today?
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="quick-action-btn" data-query="water issues">Water Issues</button>
                        <button class="quick-action-btn" data-query="traffic status">Traffic Status</button>
                        <button class="quick-action-btn" data-query="sustainability tips">Sustainability Tips</button>
                        <button class="quick-action-btn" data-query="report problem">Report Problem</button>
                    </div>
                    
                    <div class="chat-input-area">
                        <input type="text" id="chat-input" class="form-control" placeholder="Type your message...">
                        <button id="send-message" class="btn btn--primary">Send</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__content">
            <div class="footer__section">
                <span>Â© 2025 Smart City Assistant</span>
            </div>
            <div class="footer__section">
                <span>Powered by IBM Granite LLM</span>
            </div>
            <div class="footer__section">
                <span>System Status: <span class="status status--success">Online</span></span>
            </div>
        </div>
    </footer>

    <!-- Success Modal -->
    <div id="success-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Success</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="success-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary modal-close">OK</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>